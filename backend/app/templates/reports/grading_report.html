<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>GRADING REPORT - BKNR SOLUTIONS</title>

<style>
body {font-family: Arial; background:#e6f2ff; margin:0; padding:0;}
h2 {text-align:center; color:#003366; margin:20px 0;}

.filter-box {
  width:95%; max-width:1100px; margin:0 auto 20px auto;
  background:white; padding:15px; border-radius:8px;
  box-shadow:0 0 8px rgba(0,0,0,0.15);
  display:flex; gap:20px; flex-wrap:wrap;
}
label {font-weight:600; color:#003366;}
select, input {
  padding:8px; border:1px solid #a3bcd6; border-radius:6px;
  background:#f9fcff; font-size:14px; min-width:180px;
}

table {
  width:95%; max-width:1100px; margin:0 auto 30px auto; background:white;
  border-collapse:collapse; box-shadow:0 0 8px rgba(0,0,0,0.15);
}
th, td {padding:10px; border-bottom:1px solid #dce6f5; font-size:14px;}
th {background:#003366; color:white;}
.no-data {text-align:center; color:#003366; font-weight:600; margin-top:20px;}
</style>
</head>

<body>

<h2>GRADING REPORT</h2>

<form method="get" class="filter-box">

  <div>
    <label>Batch Number</label><br>
    <select name="batch" onchange="this.form.submit()">
      <option value="">All</option>
      {% for b in batch_list %}
      <option value="{{ b }}" {% if selected_batch == b %}selected{% endif %}>{{ b }}</option>
      {% endfor %}
    </select>
  </div>

  <div>
    <label>From Date</label><br>
    <input type="date" name="from_date" value="{{ selected_from }}" onchange="this.form.submit()">
  </div>

  <div>
    <label>To Date</label><br>
    <input type="date" name="to_date" value="{{ selected_to }}" onchange="this.form.submit()">
  </div>

</form>

{% if grading_data %}
<table>
<thead>
<tr>
  <th>ID</th>
  <th>Batch</th>
  <th>Variety</th>
  <th>Count</th>
  <th>Grade</th>
  <th>Quantity</th>
  <th>Date</th>
</tr>
</thead>

<tbody>
{% for r in grading_data %}
<tr>
  <td>{{ r.id }}</td>
  <td>{{ r.batch_number }}</td>
  <td>{{ r.variety_name }}</td>
  <td>{{ r.graded_count }}</td>
  <td>{{ r.grade_name }}</td>
  <td>{{ r.quantity }}</td>
  <td>{{ r.date }}</td>
</tr>
{% endfor %}
</tbody>

</table>
{% else %}
<p class="no-data">No records found.</p>
{% endif %}

</body>
</html>
